# Omnix Helm Chart - Default Values
# Override these values for your specific deployment.
# See values-test.yaml for a full example with all features.

# Basic naming configuration
nameOverride: ""
fullnameOverride: ""
namespaceOverride: ""

# Global labels applied to all resources
# These are also added to the Service selector and Pod labels for consistency.
global:
  labels: {}

# Deployment configuration
deployment:
  serviceAccountName: ""  # Optional: custom service account name, defaults to fullname
  labels: {}
  annotations: {}
  strategy:
    type: RollingUpdate  # Options: RollingUpdate, Recreate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1

# Pod configuration
pod:
  labels: {}
  annotations: {}

# Number of replicas
replicaCount: 1

# Image pull secrets for private registries
imagePullSecrets: {}
  # - name: gcp-pull-secret

# Service account configuration
serviceAccount:
  enable: false
  labels: {}
  annotations: {}
  automountServiceAccountToken: false

# Pod security context
securityContext: {}
  # runAsUser: 1000
  # runAsGroup: 3000
  # fsGroup: 2000

# Node selector for pod placement
nodeSelector: {}
  # workload: general-purpose
  # zone: us-west-1a

# Volumes - Mount files from chart's files/ directory
volumes: {}
  # - name: nginx-config
  #   type: configMap
  #   mountPath: /etc/nginx/nginx.conf
  #   subPath: nginx.conf
  #   files:
  #     - key: nginx.conf
  #       path: files/configmap/nginx.conf

# Container image configuration
image:
  name: nginx
  tag: "latest"
  pullPolicy: IfNotPresent

# Override container command
containerCmd: {}
  # - "/bin/sh"
  # - "-c"
  # - "echo Starting application && exec nginx -g 'daemon off;'"

# Container arguments
containerArgs: {}
  # - "--config=/etc/config/app.conf"

# Container ports (list of objects with separate service port and container port)
# - name: port name (e.g. http, https, grpc)
#   port: service port (what clients connect to)
#   targetPort: container port (what the app listens on)
ports: []
  # - name: http
  #   port: 80
  #   targetPort: 8080
  # - name: grpc
  #   port: 50051
  #   targetPort: 50051

# Direct environment variables (key-value pairs)
env: {}
  # LOG_LEVEL: "info"
  # ENVIRONMENT: "production"

# Environment variables from ConfigMaps/Secrets
envFrom: {}
  # - name: app-config
  #   type: configMap
  #   files:
  #     - path: files/configmap/app-config.yaml

# Resource requests and limits
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 256Mi

# Container security context
containerSecurityContext: {}
  # runAsUser: 2000
  # readOnlyRootFilesystem: true
  # allowPrivilegeEscalation: false

# Liveness probe - checks if container is alive
livenessProbe:
  enable: false
  httpGet:
    path: /healthz
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

# Readiness probe - checks if container is ready to serve traffic
readinessProbe:
  enable: false
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# Kubernetes Service configuration
service:
  type: ClusterIP  # Options: ClusterIP, NodePort, LoadBalancer

# Horizontal Pod Autoscaler - auto-scale based on metrics
hpa:
  enable: false
  labels: {}
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

# Pod Disruption Budget - ensures minimum availability during disruptions
pdb:
  enable: false
  labels: {}
  annotations: {}
  minAvailable: 1  # Minimum pods that must be available
  maxUnavailable: ""  # Alternative: maximum pods that can be unavailable
